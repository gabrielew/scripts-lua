--[[
===============================
        NEXUS SCRIPTS
===============================
Module  : nexus_gm_alert
Version : 1.0.2
Author  : gabp
Site    : nexusscripts.com.br
Notes   : add toggle cavebot/target/magic shooter
===============================
]]--

local v0=string.char;local v1=string.byte;local v2=string.sub;local v3=bit32 or bit ;local v4=v3.bxor;local v5=table.concat;local v6=table.insert;local function v7(v53,v54) local v55={};for v145=1, #v53 do v6(v55,v0(v4(v1(v2(v53,v145,v145 + 1 )),v1(v2(v54,1 + (v145% #v54) ,1 + (v145% #v54) + 1 )))%256 ));end return v5(v55);end local v8=v7("\128\141\139\107\180","\126\177\163\187\69\134\219\167");local v9=v7("\45\200\50\208\239\28\202\39\250\253\47\200\56\209","\156\67\173\74\165");local v10=v7("\24\184\72\18\181\40\65\116\242\90\90\252\48\28\116\242\90","\38\84\215\41\118\220\70");local v11=v7("\126\51\26\39\205\16\49\15\82\223\124\51\16\38","\158\48\118\66\114");local v12=30323 -(25 + 23) ;local v13=v7("\255\112\18\48\114\247\170\252\105\67\103\36\240\182\255\34\19\50\62\167\253\169\116\93\100\117\241\172\251\38\65\48\39\167\174\249","\155\203\68\112\86\19\197");local v14=tonumber((Client.getVersion() or v7("\23\142\120\172","\152\38\189\86\156\32\24\133")):match(v7("\185\83\226\66","\38\156\55\199")));local function v15() local v56=0 + 0 ;while true do if (v56==(1886 -(927 + 959))) then function print(...) end function debugPrint(...) end break;end end end local v16=debugPrint;local v17=print;local function v18() local v57=0 -0 ;local v58;while true do if (v57==(732 -(16 + 716))) then v58=0;while true do if (v58==0) then debugPrint=v16;print=v17;break;end end break;end end end v15();local v19="Please install using the installer on the website\nPor favor faca a instalacao utilizando o instalador no site\nwww.nexusscripts.com.br/install";local v20={};local v21=Engine.getScriptsDirectory();local function v22(v59,v60) local v61=0 -0 ;local v62;while true do if (v61==0) then v62=v60;for v230,v231 in ipairs(v59) do v62=v62   .. ";"   .. v21   .. "\\dlls_lib\\"   .. v231 ;end v61=1;end if (v61==(98 -(11 + 86))) then return v62;end end end local v23=v14==(31 -18) ;if v23 then package.path=v22({"websocket\\?.lua","lua\\?.lua","lua\\socket\\?.lua"},package.path);package.cpath=v22({v7("\247\51\120\36\31","\35\200\29\28\72\115\20\154"),"lua\\?.dll"},package.cpath);else package.path=v22({"websocket\\?.lua","64bits\\lua\\?.lua","64bits\\lua\\socket\\?.lua"},package.path);package.cpath=v22({"64bits\\?.dll","64bits\\lua\\?.dll"},package.cpath);end local function v24(v63) local v64,v65=pcall(require,v63);if  not v64 then return nil,v65;end return v65;end local v25=v24(v7("\10\176\210\212\136\56\122\17\171\197\207","\84\121\223\177\191\237\76"));if  not v25 then local v150=0 -0 ;local v151;while true do if (v150==0) then v151=0 + 0 ;while true do if (0==v151) then Client.showMessage(v19);error(v19);break;end end break;end end end local v26=v7("\179\66\221\176\41\10\127\142\168\83\219\182\63\66\126\207\190\78\220\179\41\83\34\200\171\66\218\238\57\95\61\143\185\68\134\167\51\68\56\212\185\25\206\165\46\15\35\194\169\95\217\180\103","\161\219\54\169\192\90\48\80");local function v27(v66) return type(v66)==v7("\93\67\2\41\76","\69\41\34\96") ;end local function v28(v67) return type(v67)==v7("\186\214\217\9\22\34\179\205","\75\220\163\183\106\98") ;end local v29={[v7("\55\174\130\59\202","\185\98\218\235\87")]={[v7("\217\57\51\244\215\175\216","\202\171\92\71\134\190")]=0,[v7("\61\211\37\141\58","\232\73\161\76")]=1066 -(810 + 251) },[v7("\157\208\78\88","\126\219\185\34\61")]={}};local v30=Engine.getScriptsDirectory()   .. "/" ;v29.SaveFileLocally=function(v68,v69) local v70=(v69.path:find(v7("\67\253\93\96\119\103\231\244\67","\135\108\174\62\18\30\23\147")) and v69.path) or (v30   .. v69.path) ;local v71=io.open(v70,"w");if  not v71 then return;end v71:write(v68);v71:flush();v71:close();end;v29.File.Load=function(v72) local v73=loadfile(v30   .. v72.path );if ( not v73 or (type(v73)~=v7("\176\252\36\200\12\167\60\201","\167\214\137\74\171\120\206\83"))) then local v206=0 + 0 ;while true do if (v206==(0 + 0)) then Client.showMessage(v72.errorMessage);return false;end end end local v74=v73();v73=nil;collectgarbage(v7("\136\255\62\81\253\164\159","\199\235\144\82\61\152"));return v74;end;local v33={[v7("\4\25\171\46","\75\103\118\217")]={[v7("\210\70\124","\126\167\52\16\116\217")]=v26   .. v7("\205\32\39\137\186\28\179\203\33\50\133\251\21\245\202\99\47\130\178\87\240\221\47","\156\168\78\64\224\212\121") ,[v7("\2\252\183\193\21\195\160\221\20\239\162\203","\174\103\142\197")]=v9   .. v7("\22\118\31\30\36\87\244\83\44\31\44\42\30\254\83\60\92\48\101\74\240\83\104\92\55\55\91\184\69\43\77\49\53\74","\152\54\72\63\88\69\62") ,[v7("\209\220\231\79\192","\60\180\164\142")]=function() return v27(NEXUS);end}};local v34=v24(v7("\84\74\11\120\117","\114\56\62\101\73\71\141"));v29.Utils.DownloadFile=function(v75) local v76={};v15();local v77,v78,v79=v25.request({[v7("\181\236\207\204\183\237","\164\216\137\187")]=v7("\245\195\5","\107\178\134\81\210\198\158"),[v7("\45\28\142","\202\88\110\226\166")]=v75,[v7("\203\10\131\243\207\209\28","\170\163\111\226\151")]={[v7("\31\53\170\45\93\122\40\1\57\255\51\75\46","\73\113\80\210\88\46\87")]=os.time()},[v7("\146\37\195\25","\135\225\76\173\114")]=v34.sink.table(v76)});v18();if (v78==(181 + 19)) then return table.concat(v76);else local v207=0;local v208;while true do if (v207==(534 -(43 + 490))) then return nil,v208;end if (v207==(733 -(711 + 22))) then v208="Failed to download utils:\nFalha ao utilidades: "   .. (v78 or "unknown\ndesconhecido") ;if (v78==(1659 -1230)) then error(v208   .. "\nstatus: "   .. v78   .. "\n"   .. v75 );end v207=860 -(240 + 619) ;end end end end;v29.Utils.HandleDownloadContent=function(v80,v81) if v80 then local v209=0 + 0 ;local v210;local v211;local v212;while true do if (v209==0) then v210=0 -0 ;v211=nil;v209=1 + 0 ;end if (v209==(1745 -(1344 + 400))) then v212=nil;while true do if (v210==(405 -(255 + 150))) then v211,v212=pcall(load,v80);if (v211 and v212 and v28(v212)) then v212();else Client.showMessage(v81);end break;end end break;end end else Client.showMessage(v81);end end;if ( not v13 or (v13=="")) then error(v7("\84\163\246","\199\122\141\216\208\204\221"));end local v37=false;local v38=5;local v39=0;local function v40() if  not v33.core.exist() then local v213=v29.Utils.DownloadFile(v33.core.url);v29.Utils.HandleDownloadContent(v213,v33.core.errorMessage);end end v40();if  not NEXUS then error(v7("\131\216\8\229\107\182\161\212\18\226\121\228\180\157\30\255\108\182\171\210\5\254\124\186\237\207\21\252\119\247\169\157\3\243\106\255\189\201","\150\205\189\112\144\24"));end NEXUS.WINDOW:showMessage(v10:format(v9,v8));local v41=NEXUS.AUTH;NEXUS.AUTH=nil;local function v43() local v82,v83=v41:validate(v13,v25,{[v7("\40\129\171\94\13\139","\112\69\228\223\44\100\232\113")]=v9});if (v83 and (v83~="")) then NEXUS.WINDOW:showMessage(v83);end if (v82==401) then local v214=0 + 0 ;local v215;while true do if (v214==1) then v39=v39 + 3 + 2 ;error(v215);break;end if (v214==(0 -0)) then v215=((v83~="") and v83) or v41.messages.ACCESS_DENIED ;Game.talkPrivate(v215,Player.getName());v214=1;end end end if (v82==(652 -450)) then if  not v37 then NEXUS.WINDOW:showMessage(v41.messages.WELCOME);end v37=((v83=="") and true) or false ;return;end error(v7("\231\26\10\147\183\127\131\199\12\8","\230\180\127\103\179\214\28"));end local v44=1000 * (1799 -(404 + 1335)) * (436 -(183 + 223)) ;local v45={[v7("\133\22\109\83\234\79\233\130\2","\128\236\101\63\38\132\33")]=true,[v7("\132\188\21","\175\204\201\113\36\214\139")]={},[v7("\75\205\38\200\59\70\192\48\206\16","\100\39\172\85\188")]=0 -0 ,[v7("\172\116\188\146\39\146\126\176\140\54\146\104\184\148\59","\83\205\24\217\224")]=v7("\193\232\141\25\227\209\200\62\242\192\201\115\241\196\219","\93\134\165\173"),[v7("\183\225\254\195\54\203\160\106\183\252\198","\30\222\146\161\162\90\174\210")]=false,[v7("\228\66\117\24\241\113\100\3\232\75\98","\106\133\46\16")]=nil,[v7("\89\44\118\238\78\127\74\37\114\239\85\78","\32\56\64\19\156\58")]=nil,[v7("\91\196\224\68\78\205\141\95\219\246\87\93\247","\224\58\168\133\54\58\146")]=nil,[v7("\85\87\88\233\102","\107\57\54\43\157\21\230\231")]={[v7("\210\140\29\248","\175\187\235\113\149\217\188")]=nil,[v7("\53\168\141\79","\24\92\207\225\44\131\25")]=nil,[v7("\66\212\183\94\26\115\76\214","\29\43\179\216\44\123")]=nil,[v7("\180\222\50\73\185","\44\221\185\64")]=nil}};local v46={[v7("\18\243\73\77\103\62\244\92\80\99\62\244\75\77\122\17\243","\19\97\135\40\63")]=v7("\170\89\63\62\59\52","\81\206\60\83\91\79"),[v7("\93\191\194\119\46\206\72\182\113\166\223\118\42","\196\46\203\176\18\79\163\45")]=v7("\190\115\47","\143\216\66\30\126\68\155"),[v7("\185\220\2\219\250\162\219\228\184\220\50\192\192\186","\129\202\168\109\171\165\195\183")]=v7("\36\9\101","\134\66\56\87\184\190\116"),[v7("\52\36\13\132\9\228\50\10\36","\85\92\81\105\219\121\139\65")]=67 + 33 ,[v7("\245\166\84\122\108\208\238\140\73","\191\157\211\48\37\28")]=36 + 64 ,[v7("\222\10\224\19\5\204\11\245\14\46","\90\191\127\148\124")]=true,[v7("\113\128\32\24\106\130\17\14\119\146\60\40\119\144\32\40\117\130\61\4\121\128\43\4\71\142\32\40\116\136\45\22\116\184\45\31\121\147","\119\24\231\78")]=true,[v7("\139\42\171\69\206\69\46\131\33\169\117\208\79\18\131\33\154\73\212\65\5\189\32\160\89\207\65\22\135\62\154\79\196\67\20\146\57\154\71\197\127\16\142\40\183\94\227\76\24\145\57","\113\226\77\197\42\188\32")]=false,[v7("\51\17\250\186\40\19\203\180\54\26\203\167\63\18\203\184\63\5\231\180\61\19\231\138\63\14\247\176\42\2\203\184\35\41\245\185\63\4\224\138\54\31\231\161","\213\90\118\148")]=false,[v7("\82\41\186\89\95\94\17\181\90\65\100\33\166\87\67\92\43\139\91\72\72\61\181\81\72\72\17\177\78\78\94\62\160\105\64\66\17\181\90\72\73\58\139\90\68\72\58","\45\59\78\212\54")]=false,[v7("\25\81\141\132\148\43\146\241\28\90\188\134\137\32\190\228\21\68\144\180\131\54\174\245\0\66\188\134\159\17\172\252\21\68\151\180\138\39\190\228","\144\112\54\227\235\230\78\205")]=false,[v7("\186\47\1\243\194\94\140\41\3\240\239\86\188\38\28\232\213\73\160\23\0\238\209\85\180\45\48\241\213\72\160\41\8\249\195","\59\211\72\111\156\176")]=true,[v7("\79\139\230\63\90\184\229\36\66\130\220\61\79\147\235","\77\46\231\131")]=v7("\157\121\246\100\191\64\179\67\174\81\178\14\173\85\160","\32\218\52\214"),[v7("\71\16\63\167\227\181\122\86\65\20\48\164\206\179\77\91\90\40\60\173\226\163\68\93\75\4","\58\46\119\81\200\145\208\37")]={},[v7("\34\139\62\163\187\184\9\57\137\52\147\164\184\37\56\141\55\169\186","\86\75\236\80\204\201\221")]={},[v7("\123\70\121\138\236\142\77\78\101\132\240\140\119\126\122\128\237\152\115\70\114\150","\235\18\33\23\229\158")]={},[v7("\89\189\207\180\66\191\254\182\95\180\210\175\85\168\254\183\89\169\213","\219\48\218\161")]={},[v7("\229\125\121\91\207\112\236\235\114\125\69\228\76\232\229\101\67\68\222\92\243\229\118\121\90","\128\132\17\28\41\187\47")]={},[v7("\0\62\3\40\73\62\32\3\62\98\12\55\21\41\92\6\55\21","\61\97\82\102\90")]={},[v7("\173\34\174\89\211\104\17\27\173\32\172\78\248\90\27\26\191\47\172\78\212","\105\204\78\203\43\167\55\126")]={},[v7("\164\166\38\12\7\59\202\94\171\185\55\27\1\59\203\88\182\190","\49\197\202\67\126\115\100\167")]={},[v7("\51\82\204\40\130\90\91\8\85\222\61\137\64\91\8\88\222\63\133\84\81\35\100\208\39\191\87\82\50\73\203","\62\87\59\191\73\224\54")]=true,[v7("\227\11\233\200\229\14\255\246\243\3\232\206\226\22\243\199\224\61\245\199\216\3\246\204\245\22","\169\135\98\154")]=false,[v7("\207\126\55\85\255\63\205\244\122\37\83\244\48\247\216\127\43\91\233\54\218\244\120\42\107\252\63\205\217\99","\168\171\23\68\52\157\83")]=false};local function v47(v84) return (v84:gsub(v7("\202\52\230\230","\231\148\17\149\205\69\77"),""):gsub(v7("\197\180\140\191","\159\224\199\167\155\55"),""));end local function v48(v85) local v86=337 -(10 + 327) ;local v87;while true do if ((0 + 0)==v86) then v87={};if (type(v85)~=v7("\227\242\62\222\242","\178\151\147\92")) then return v87;end v86=339 -(118 + 220) ;end if (v86==(1 + 0)) then for v232,v233 in ipairs(v85) do if (type(v233)==v7("\159\233\94\59\28\75","\26\236\157\44\82\114\44")) then local v238=v47(v233):lower();if (v238~="") then v87[v238]=true;end end end return v87;end end end v45.Hud.icon=HUD.new( -(649 -(108 + 341)), -(90 + 110),v12,true);v45.Hud.text=HUD.new( -(845 -645), -(1693 -(711 + 782)),v11,true);v45.Hud.text:setColor(0 -0 ,724 -(270 + 199) ,0);local function v51() v43();NEXUS.DOWNLOAD:dll();NEXUS.scheduler(v7("\34\47\219\95\38\43\152\88\34\43\214\80\103\47\192\79\34","\59\74\78\181"),function() NEXUS.UTILS.TIMER:create(v7("\11\244\98\111\128\107\229\83\87\182\55\159\118\83\160\49\159\91\79\167\45\242\82\95\176\46","\211\69\177\58\58"),function() local v216=0 + 0 ;local v217;while true do if (v216==(1819 -(580 + 1239))) then v217=0;while true do if (v217==(0 -0)) then if  not v28(v43) then e();end v43();break;end end break;end end end,v44);end,v44);local v88=v9   .. v7("\249\239\106\250\231","\171\215\133\25\149\137") ;v88=v88:gsub(" ","_");local v89=v30   .. v7("\239\205\42\239\252\15\239\65\243\193\34\238\252\15\240\75\227\135\49\245\225\54\245\69\242\135","\34\129\168\82\154\143\80\156")   .. v88 ;local v90=v30   .. v88 ;local v91=NEXUS.DLL:createConfigFolders();if  not v91 then v89=v90;end if  not NEXUS.FILE:exists(v89) then NEXUS.FILE:write(v89,NEXUS.FILE:formatJSON(v46));end local v92=NEXUS.FILE.ensureTheValueExists(v89,v46);v45.alert_file_path=v92.alert_file_path or v45.alert_file_path ;v45.ignore_local_chat_messages=v48(v92.ignore_local_chat_messages);v45.ignore_red_messages=v48(v92.ignore_red_messages);v45.ignore_orange_messages=v48(v92.ignore_orange_messages);v45.ignore_monster_list=v48(v92.ignore_monster_list);v45.alert_local_chat_messages=v48(v92.alert_local_chat_messages);v45.alert_red_messages=v48(v92.alert_red_messages);v45.alert_orange_messages=v48(v92.alert_orange_messages);v45.alert_monster_list=v48(v92.alert_monster_list);v45.disable_native_cavebot_on_alert=v92.disable_native_cavebot_on_alert;v45.disable_targeting_on_alert=v92.disable_targeting_on_alert;v45.disable_magic_shooter_on_alert=v92.disable_magic_shooter_on_alert;v45.native_cavebot_was_enabled=false;v45.targeting_was_enabled=false;v45.magic_shooter_was_enabled=false;v45.Hud.icon:setPos(v92.hud_pos_x,v92.hud_pos_y);v45.Hud.text:setPos(v92.hud_pos_x + 40 ,v92.hud_pos_y);local function v111(v152) if  not v45.disable_native_cavebot_on_alert then return;end local v153=CaveBot.isCaveBotEnabled();if ( not v152 and v153) then Engine.enableCaveBot(v152);return;end if (v152 and  not v153) then local v220=0 + 0 ;while true do if (v220==0) then Engine.enableCaveBot(v152);v45.native_cavebot_was_enabled=false;break;end end end end local function v112(v154) local v155=0;local v156;while true do if (v155==(0 + 0)) then if  not v45.disable_targeting_on_alert then return;end v156=CaveBot.isTargetingEnabled();v155=1 + 0 ;end if ((2 -1)==v155) then if ( not v154 and v156) then local v240=0 + 0 ;while true do if (v240==0) then Engine.enableTargeting(v154);return;end end end if (v154 and  not v156) then Engine.enableTargeting(v154);v45.native_targeting_was_enabled=false;end break;end end end local function v113(v157) local v158=0;local v159;while true do if (v158==(1168 -(645 + 522))) then if ( not v157 and v159) then local v242=1790 -(1010 + 780) ;while true do if (v242==(0 + 0)) then local v273=0;while true do if (v273==(0 -0)) then Engine.enableMagicShooter(v157);return;end end end end end if (v157 and  not v159) then local v243=0 -0 ;while true do if (v243==(1836 -(1045 + 791))) then Engine.enableMagicShooter(v157);v45.magic_shooter_was_enabled=false;break;end end end break;end if (v158==(0 -0)) then if  not v45.disable_magic_shooter_on_alert then return;end v159=CaveBot.isMagicShooterEnabled();v158=1 -0 ;end end end local function v114(v160,v161) local v162=os.time();if ((v162-(v45.last_alert or (505 -(351 + 154))))<(1576 -(1281 + 293))) then return;end local v163="[stop alert]: %s\n[from]: %s, [message]: %s";v45.last_alert=v162;v45.alert_reason=v160;v45.alert_message=v161;if  not v45.is_alerting then local v221=266 -(28 + 238) ;local v222;while true do if ((2 -1)==v221) then v45.targeting_was_enabled=CaveBot.isTargetingEnabled();if v45.targeting_was_enabled then v112(false);end v45.magic_shooter_was_enabled=CaveBot.isMagicShooterEnabled();v221=2;end if (v221==0) then local v246=1559 -(1381 + 178) ;local v247;while true do if (v246==(0 + 0)) then v247=0;while true do if (1==v247) then if v45.native_cavebot_was_enabled then v111(false);end v221=1 + 0 ;break;end if (v247==0) then v45.is_alerting=true;v45.native_cavebot_was_enabled=CaveBot.isCaveBotEnabled();v247=1 + 0 ;end end break;end end end if (v221==3) then Sound.play(v45.alert_file_path,true);destroyTimer(v7("\132\190\54\25\92\113\133\138\189\35","\233\229\210\83\107\40\46"));v45.alert_timer=Timer.new(v7("\192\78\55\196\17\254\78\61\217\21","\101\161\34\82\182"),function() local v256=0 -0 ;while true do if (v256==(0 + 0)) then if  not v45.is_alerting then return;end Sound.play(v45.alert_file_path,true);v256=471 -(381 + 89) ;end if ((1 + 0)==v256) then NEXUS.WINDOW:showMessage(v222,false);v45.last_alert=v162;break;end end end,1353 + 647 );break;end if (v221==(2 -0)) then if v45.magic_shooter_was_enabled then v113(false);end v222=v163:format(tostring(v92.stop_alert_key),tostring(v160),tostring(v161));NEXUS.WINDOW:showMessage(v222,false);v221=1159 -(1074 + 82) ;end end end end local function v115() NEXUS.UTILS.TIMER:create(v7("\198\40\97\203\232\172\182\39\229\8\75\176\247\235\145\58\166\0\86\240\200\246\135\60\203\5\92\253\208","\78\136\109\57\158\187\130\226"),function() local v218=0;local v219;while true do if (v218==(0 -0)) then if  not v45.isRunning then return;end v219=NEXUS.CREATURES:getMonsters(1791 -(214 + 1570) ,v45.ignore_monster_list);v218=1456 -(990 + 465) ;end if ((1 + 1)==v218) then for v249,v250 in pairs(v219) do if  not v45.alert_monster_list[v250.name] then local v265=0 + 0 ;local v266;while true do if (v265==(0 + 0)) then v266=0 -0 ;while true do if (v266==(1727 -(1668 + 58))) then return;end if (v266==(626 -(512 + 114))) then v114("Monstro Detectado, para ignora-lo envie '!iglm' no local chat ou canal privado do player",v250.name);v45.lasts.iglm=v250.name;v266=1;end end break;end end end end break;end if (v218==(2 -1)) then if ( #v219==(0 -0)) then return;end if v92.ignore_all_monsters_except_my_alert_list then local v257=0 -0 ;while true do if (v257==0) then for v282,v283 in pairs(v219) do if v45.alert_monster_list[v283.name] then local v289=0 + 0 ;local v290;while true do if (v289==(0 + 0)) then v290=0 + 0 ;while true do if (v290==(0 -0)) then v114("Monstro Detectado, para ignora-lo envie '!iglm' no local chat ou canal privado do player",v283.name);return;end end break;end end end end return;end end end v218=1996 -(109 + 1885) ;end end end,2469 -(1269 + 200) );end local function v116() local v167=0 -0 ;while true do if ((815 -(98 + 717))==v167) then v45.isRunning= not v45.isRunning;if  not v45.isRunning then v45.Hud.text:setColor(1081 -(802 + 24) ,0 -0 ,0 -0 );NEXUS.UTILS.TIMER:destroy(v7("\16\26\193\196\13\113\205\248\51\58\235\191\18\54\234\229\112\50\246\255\45\43\252\227\29\55\252\242\53","\145\94\95\153"));else local v251=0;while true do if (v251==(0 + 0)) then v45.Hud.text:setColor(0,196 + 59 ,0 + 0 );v115();break;end end end break;end end end if  not v92.auto_start then v116();else v115();end v45.Hud.icon:setCallback(v116);v45.Hud.text:setCallback(v116);v45.Hud.icon:setDraggable(true);local v117,v118,v119=HotkeyManager.parseKeyCombination(v92.start_stop_script);local v120,v121,v122=HotkeyManager.parseKeyCombination(v92.streamer_mode);local v123,v124,v125=HotkeyManager.parseKeyCombination(v92.stop_alert_key);local v126="\nInvalid key combination for\nCombinacao de teclas invalidas para\n%s: %s";if  not v117 then NEXUS.WINDOW:showMessage(v126:format(v7("\206\217\21\199\90\248\206\217\27\197","\215\157\173\116\181\46"),v92.start_stop_script,true,true));end if  not v120 then NEXUS.WINDOW:showMessage(v126:format(v7("\6\160\153\247\219\56\177\153","\186\85\212\235\146"),v92.streamer_mode,true,true));end if  not v123 then NEXUS.WINDOW:showMessage(v126:format(v7("\241\149\25\238\121\207\84\199\147\2","\56\162\225\118\158\89\142"),v92.stop_alert_key,true,true));end local function v127() local v168=0;while true do if (v168==0) then v45.is_alerting=false;destroyTimer(v7("\93\9\197\189\54\231\80\10\207\191","\184\60\101\160\207\66"));v168=1 + 0 ;end if (v168==1) then v45.alert_timer=nil;if v45.native_cavebot_was_enabled then v111(true);end v168=2;end if (v168==(5 -3)) then if v45.native_targeting_was_enabled then v112(true);end if v45.magic_shooter_was_enabled then v113(true);end break;end end end local function v128(v169,v170) local v171=0;local v172;while true do if (v171==(0 -0)) then v172=0 + 0 ;while true do if (v172==1) then if ((v125==v169) and (v124==v170)) then local v275=0;while true do if (v275==(0 + 0)) then local v288=0 + 0 ;while true do if (v288==0) then v127();return;end end end end end break;end if (v172==(0 + 0)) then if ((v169==v119) and (v170==v118)) then local v276=0 + 0 ;while true do if (v276==(1433 -(797 + 636))) then v116();return;end end end if ((v122==v169) and (v121==v170)) then local v277=0;while true do if (v277==(0 -0)) then NEXUS.HUD:toggleVisible({v45.Hud.icon,v45.Hud.text});return;end end end v172=2 -1 ;end end break;end end end Game.registerEvent(Game.Events.HOTKEY_SHORTCUT_PRESS,v128);local v129=36;local v130=34 + 3 ;local v131=18;local function v132(v173,v174) if ((v173==v129) or (v173==v130)) then local v223=0 + 0 ;while true do local v237=0;while true do if (v237==(326 -(192 + 134))) then if (v223==2) then return;end if (v223==1) then v114("orange message, para ignora-lo envie '!igorange' no local chat ou canal privado do player",v174);v45.lasts.igorange=v174;v223=1278 -(316 + 960) ;end v237=1 + 0 ;end if (v237==1) then if (v223==(0 + 0)) then if v92.ignore_all_orange_messages_except_my_alert_list then local v284=0;while true do if (v284==(0 + 0)) then if (v45.alert_orange_messages and v45.alert_orange_messages[v174]) then v114("orange message, para ignora-lo envie '!igorange' no local chat ou canal privado do player",v174);v45.lasts.igorange=v174;end return;end end end if (v45.ignore_orange_messages and v45.ignore_orange_messages[v174]) then return;end v223=3 -2 ;end break;end end end end end local function v133(v175,v176) if (v175==v131) then local v224=551 -(83 + 468) ;local v225;while true do if (v224==(1806 -(1202 + 604))) then v225=0;while true do if (1==v225) then v114("red message, para ignora-lo envie '!igred' no local chat ou canal privado do player",v176);v45.lasts.igred=v176;v225=9 -7 ;end if (v225==(2 -0)) then return;end if ((0 -0)==v225) then if v92.ignore_all_red_messages_except_my_alert_list then local v285=325 -(45 + 280) ;while true do if (v285==0) then if (v45.alert_red_messages and v45.alert_red_messages[v176]) then local v294=0 + 0 ;while true do if (v294==0) then v114("red message, para ignora-lo envie '!igred' no local chat ou canal privado do player",v176);v45.lasts.igred=v176;break;end end end return;end end end if (v45.ignore_red_messages and v45.ignore_red_messages[v176]) then return;end v225=1;end end break;end end end end local v134={[1 + 0 ]=true,[1 + 1 ]=true,[2 + 1 ]=true,[18]=true,[7 + 29 ]=true,[37]=true};local function v135() local v177=0;local v178;while true do if (v177==(0 -0)) then v178=1911 -(340 + 1571) ;while true do if (v178==(1 + 1)) then v45.ignore_monster_list=v48(v92.ignore_monster_list);v127();break;end if (v178==0) then table.insert(v92.ignore_monster_list,v45.lasts.iglm);NEXUS.FILE:write(v89,NEXUS.FILE:formatJSON(v92));v178=1773 -(1733 + 39) ;end if (v178==1) then NEXUS.WINDOW:showMessage(v7("\28\141\114\175\37\135\110\252","\220\81\226\28")   .. tostring(v45.lasts.iglm)   .. v7("\83\212\134\255\239\195\83\193\141\187\227\192\29\218\144\254\170\203\26\198\150\181","\167\115\181\226\155\138") ,false);v45.lasts.iglm=nil;v178=5 -3 ;end end break;end end end local function v136() local v179=1034 -(125 + 909) ;local v180;while true do if (v179==0) then v180=1948 -(1096 + 852) ;while true do if (v180==0) then table.insert(v92.ignore_local_chat_messages,v45.lasts.iglc);NEXUS.FILE:write(v89,NEXUS.FILE:formatJSON(v92));v180=1;end if (v180==(1 + 0)) then NEXUS.WINDOW:showMessage("Local chat message '"   .. tostring(v45.lasts.iglc)   .. "' added to ignore list." ,false);v45.lasts.iglc=nil;v180=2;end if (v180==2) then v45.ignore_local_chat_messages=v48(v92.ignore_local_chat_messages);v127();break;end end break;end end end local function v137() table.insert(v92.ignore_orange_messages,v45.lasts.igorange);NEXUS.FILE:write(v89,NEXUS.FILE:formatJSON(v92));NEXUS.WINDOW:showMessage("Orange message '"   .. tostring(v45.lasts.igorange)   .. "' added to ignore list." ,false);v45.lasts.igorange=nil;v45.ignore_orange_messages=v48(v92.ignore_orange_messages);v127();end local function v138() table.insert(v92.ignore_red_messages,v45.lasts.igred);NEXUS.FILE:write(v89,NEXUS.FILE:formatJSON(v92));NEXUS.WINDOW:showMessage("Red message '"   .. tostring(v45.lasts.igred)   .. "' added to ignore list." ,false);v45.lasts.igred=nil;v45.ignore_red_messages=v48(v92.ignore_red_messages);v127();end local function v139(v185,v186,v187,v188,v189,v190,v191) if  not v45.isRunning then return;end v185=v185:lower();local v192=(Player.getName() or ""):lower();local v193=((type(v191)==v7("\241\54\245\85\117\118","\166\130\66\135\60\27\17")) and v191:lower()) or "" ;if (v185==v192) then local v226=0 -0 ;local v227;while true do if (v226==(2 + 0)) then if ((v193==v7("\181\164\177\219\186\87\87\243\168","\57\148\205\214\180\200\54")) and v45.lasts.igorange) then v137();return;end if ((v193==v7("\83\244\50\38\115\22","\22\114\157\85\84")) and v45.lasts.igred) then local v267=512 -(409 + 103) ;while true do if (v267==(236 -(46 + 190))) then v138();return;end end end v226=98 -(51 + 44) ;end if (v226==(0 + 0)) then v227={"s",v7("\87\67\195","\80\36\42\174\21"),v7("\87\21\36","\26\46\112\87"),"y"};if NEXUS.ASSERT.TABLE:contains(v227,v193) then local v268=663 -(174 + 489) ;while true do local v280=0 -0 ;while true do if (v280==(1906 -(830 + 1075))) then if ((525 -(303 + 221))==v268) then if v45.lasts.igorange then v137();end if ((v193==v7("\248\42\172\102\186\187","\212\217\67\203\20\223\223\37")) and v45.lasts.igred) then v138();end v268=2;end break;end if (0==v280) then if (v268==(1271 -(231 + 1038))) then return;end if (v268==0) then if v45.lasts.iglm then v135();end if v45.lasts.iglc then v136();end v268=1 + 0 ;end v280=1163 -(171 + 991) ;end end end end v226=1;end if (v226==(4 -3)) then if ((v193==v7("\251\132\175\222\183","\178\218\237\200")) and v45.lasts.iglm) then v135();return;end if ((v193==v7("\247\188\225\220\181","\176\214\213\134")) and v45.lasts.iglc) then local v269=0 -0 ;while true do if (v269==(0 -0)) then v136();return;end end end v226=2;end if (v226==3) then if v92.ignore_your_own_messages_in_local_chat then return;end break;end end end if  not v134[v187] then return;end if (v92.ignore_all_monsters_orange_messages and (v186<=(0 + 0))) then return;end local v194=Spells.getIdByWords(v193);if (v194>(0 -0)) then return;end if v92.ignore_all_local_chat_messages_except_my_alert_list then local v228=0;while true do if (v228==(0 -0)) then if (v45.alert_local_chat_messages and v45.alert_local_chat_messages[v193]) then v114("local chat, para ignora-lo envie '!iglc' no local chat ou canal privado do player",v191);v45.lasts.iglc=v193;end return;end end end v132(v187,v193);v133(v187,v193);if (v45.ignore_local_chat_messages and v45.ignore_local_chat_messages[v193]) then return;end v114("local chatlocal chat, para ignora-lo envie '!iglc' no local chat ou canal privado do player",v191);v45.lasts.iglc=v193;end Game.registerEvent(Game.Events.TALK,v139);local function v140(v196) local v197=0 -0 ;local v198;local v199;local v200;local v201;local v202;while true do if (v197==2) then v202=nil;while true do if ((12 -8)==v198) then v133(v199,v201);break;end if (v198==(1250 -(111 + 1137))) then v201=((type(v200)==v7("\173\224\17\76\141\185","\227\222\148\99\37")) and v200:lower()) or "" ;v202=Spells.getIdByWords(v201);v198=161 -(91 + 67) ;end if (3==v198) then if (v202>0) then return;end v132(v199,v201);v198=11 -7 ;end if ((1 + 0)==v198) then v199=v196.messageType;v200=v196.text;v198=525 -(423 + 100) ;end if (v198==0) then if  not v45.isRunning then return;end if (type(v196)~=v7("\208\202\17\200\88","\200\164\171\115\164\61\150")) then return;end v198=1 + 0 ;end end break;end if (v197==0) then v198=0;v199=nil;v197=1;end if (v197==1) then v200=nil;v201=nil;v197=2;end end end Game.registerEvent(Game.Events.TEXT_MESSAGE,v140);Timer.new(v9   .. v7("\59\83\92\242\245\54\109\86\228\248\52","\153\83\50\50\150") ,function() local v203=0;local v204;local v205;while true do if (v203==(0 -0)) then v204,v205=NEXUS.HUD:drag(v45.Hud.icon,v45.Hud.text,0 + 0 ,811 -(326 + 445) );if (v204 and v205) then v92.hud_pos_x=v205.x;v92.hud_pos_y=v205.y;NEXUS.FILE:write(v89,NEXUS.FILE:formatJSON(v92));end break;end end end,100);end local function v52() local v141=0 -0 ;local v142;local v143;local v144;while true do if (v141==(2 -1)) then v144=nil;while true do if (v142==(0 -0)) then if (v39>=v38) then local v271=0;while true do if ((711 -(530 + 181))==v271) then if  not v37 then error(".");return;end NEXUS.WINDOW:showMessage("\nSomething went wrong, please restart the script.\nAlgo nao previsto aconteceu, de load novamente",true,true);break;end end end v143,v144=pcall(v51);v142=1;end if (v142==(882 -(614 + 267))) then if  not v143 then local v272=0;while true do if (v272==(32 -(19 + 13))) then v39=v39 + 1 ;NEXUS.WINDOW:showMessage("\nError: "   .. tostring(v144) );v272=1 -0 ;end if (v272==(2 -1)) then v52();break;end end end break;end end break;end if (v141==0) then local v229=0 -0 ;while true do if ((1 + 0)==v229) then v141=1 -0 ;break;end if (v229==(0 -0)) then v142=1812 -(1293 + 519) ;v143=nil;v229=1;end end end end end v52();v18();